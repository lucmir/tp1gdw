\documentclass[a4paper,10pt,brazil]{article}
\newcommand{\ultimamodificacao}{1 de dezembro de 2008}
\pagenumbering{arabic}
\usepackage[latin1]{inputenc}
\usepackage[brazil]{babel}
\usepackage{latexsym}
\usepackage{indentfirst}
\usepackage{epsfig}
\usepackage{algorithmic}
\usepackage{amsmath}
\usepackage{graphics}
\usepackage{rotating}
\usepackage{dinossauro}
\setlength{\textwidth}{16cm}
\setlength{\textheight}{23,5cm}
\evensidemargin 0cm
\oddsidemargin 0cm
\topmargin 0cm



\title{Trabalho Prático 1:
\\Extração Automática de Dados}
\author{
\\
\\
\\
\\
\\
\\
\\
\\\textbf{Disciplina:} Gerência de Dados da Web
\\
\\\textbf{Professor:} Alberto Laender
\\
\\
\\
\\
\\
\\
\\
\\\textbf{Alunos:} Marco Túlio Correia Ribeiro
\\Lucas Cunha de Oliveira Miranda
\\
\\\{marcotcr,lucmir\}@dcc.ufmg.br
\\
\\
\\
\\
\\
\\
\\
\\
\\
\\
\\
\\
\\
\\
\\
\\
}

\begin{document}
\begin{titlepage}
 \maketitle
 \thispagestyle{empty}
\end{titlepage}


\section{Introdução}
Este trabalho consiste na implementação de um método para extração automática de
dados presentes em uma coleção de páginas HTML fornecida como entrada.

Para o processo de extração, consideramos as seguintes hipóteses:
\begin{enumerate}
\item Levando
em consideração o trabalho proposto por Valiente~\cite{valiente}, os dados de
interesse a serem extraídos das páginas estão nas folhas das sub-árvores que
compõem a maior classe de equivalência dessas páginas. Essa hipótese, em geral,
é válida - uma vez que cada registros presente nas páginas geralmente é
composto por um único bloco, gerado automaticamente. Porém, em algumas páginas,
os registros podem estar divididos em dois ou mais blocos, com classes de
equivalência de tamanhos semelhantes. Portanto, a hipótese sob a qual
implementamos o trabalho foi \textbf{``Os dados de interesse a serem extraídos das
páginas estão nas folhas das 
sub-árvores que compõem as classes de equivalência mais frequentes dessas páginas''}, ou
seja, consideramos a possibilidade de registros aparecerem em duas ou mais
classes de equivalência frequentes.

\item \textbf{As folhas devem ser desconsideradas ao se calcular classes de
equivalência das sub-árvores.} Essa hipótese é simples de ser verificada. A
figura \ref{amazon}, por exemplo, retirada de uma página da amazon, contém 4
registros. Se as folhas forem consideradas ao se assinalar classes de
equivalência, cada sub-árvore contendo um registro será assinalada a uma classe
de equivalência. Se as folhas não forem consideradas, por outro lado, todas as
sub-árvores contendo os registros serão assinalados à mesma classe de
equivalência, e essa classe de equivalência será considerada frequente,
facilitando a extração dos registros.
\begin{figure}[h!]
\centering
\includegraphics[scale=0.55]{figura1.png}
\caption{Exemplo de página da amazon}
\label{amazon}
\end{figure}
\item \textbf{Folhas compostas por tags HTML não são dados de interesse a serem
extraídos} - Uma vez que o nosso extrator só lida com texto, folhas compostas
por tags com imagens ou similares não são de nosso interesse - e portanto foram
descartadas.
\end{enumerate}

\section{Implementação}
Nesta seção, detalhamos a metodologia utilizada para a implementação do
extrator, em especial visando as três hipóteses levantadas na seção anterior. 

\subsection{Determinando as sub-árvores de interesse}
Para a determinação das classes de equivalência, utilizamos o método de
Valiente~\cite{valiente} levemente modificado, tal que as folhas não sejam
consideradas na determinação de classes de equivalência. Essa modificação é
descrita em maiores detalhes na subseção seguinte. Foi fornecido o código fonte
de uma implementação do método original.

Considerando a hipótese \textbf{``Os dados de interesse a serem extraídos das
páginas estão nas folhas das 
sub-árvores que compõem as classes de equivalência mais frequentes dessas
páginas''}, existe um compromisso entre a frequência de uma classe de
equivalência e o tamanho da sub-árvore que é representada por essa classe. Em
geral, as folhas compõem as maiores classes de equivalência (embora as mesmas
não sejam consideradas por nosso extrator, devido à hipótese 2). As sub-árvores
de tamanho 2, compostas geralmente por tags HTML envolvendo as folhas, são
geralmente as
próximas classes de equivalência mais frequentes. Na figura \ref{amazon}, por
exemplo, a sub-árvore contendo a tag <a> (anchor), que envolve todos os
links demonstrados em azul na página, é a que possui a classe de
equivalência mais frequente. Porém, muitas das folhas encapsuladas por essa tag
não contém dados de interesse (``Home \& Kitchen'', por exemplo).

Utilizando vários exemplos de teste, chegamos à conclusão que é interessante
avaliar apenas sub-árvores de tamanho mínimo 3. Uma vez que esse parâmetro é
determinado, precisamos decidir quais classes de equivalência devem ser
consideradas ``de interesse''. Para tal, decidimos considerar as 10 classes de
equivalência mais frequentes como interessantes, desde que o decaimento de frequência entre uma
classe e a próxima menos frequente seja menos do que um limiar, que fixamos em
90\%. A determinação de classes de equivalência que
representam sub-árvores de interesse é apresentada em pseudo-código na Figura
2, a seguir.

\begin{figure}[h!]
\begin{algorithmic}[1]
\STATE{Dada uma página html:}
\STATE{Utiliza o método de valiente modificado para determinar as classes de
equivalência}
\STATE{Conta a frequência das classes de equivalência que representam as sub-árvores
de tamanho mínimo 3}
\STATE{Ordena as classes de equivalência por frequência}
\STATE{i = 1}
\FORALL{Classe de equivalência frequente $j$}
  \IF{$Frequencia_j / Frequencia_{j-1} < 0.1$ OR $i = 10$}
     \STATE{break}
  \ENDIF
  \STATE{Adiciona $j$ à lista das classes de interesse}
  \STATE{i++}
\ENDFOR
\end{algorithmic}
\label{codigo1}
\caption{Determinação de classes de equivalência que representam sub-árvores de
interesse.}
\end{figure}


\subsection{Modificação no método de Valiente}
Dada a hipótese \textbf{``As folhas devem ser desconsideradas ao se calcular classes de
equivalência das sub-árvores.''}, foi necessário modificar pontualmente o método
proposto por Valiente~\cite{valiente}, de forma que os \emph{mappings
bottom-up} não levem em consideração as folhas. Por exemplo, a Figura
\ref{trees1} mostra através de nós coloridos de verde a maior floresta comum
entre a Arvore 1 e a Arvore 2, utilizando o método de valiente. Vale notar que o
que impediu que uma floresta comum maior fosse identificada é a diferença
entre as folhas 2 (da Arvore 1) e 5 (da Arvore 2). A figura \ref{trees2}, por
outro lado, mostra a maior floresta comum entre as duas árvores utilizando o
método de Valiente modificado, de forma que as folhas não são consideradas.
Nesse caso, as duas árvores são consideradas equivalentes.

\begin{figure}[h!]
\centering
\includegraphics[scale=0.55]{trees1.png}
\caption{Maior floresta comum entre Arvore1 e Arvore2, utilizando o método de
Valiente.}
\label{trees1}
\end{figure}

\begin{figure}[h!]
\centering
\includegraphics[scale=0.55]{trees2.png}
\caption{Maior floresta comum entre Arvore1 e Arvore2, utilizando o método de
Valiente modificado.}
\label{trees2}
\end{figure}

Desta forma, sub-árvores contendo os registros serão consideradas equivalentes,
mesmo se os registros em si contenham dados diferentes.

\subsection{A extração}
Utilizando a metodologia descrita na subseção 2.1, um conjunto de no máximo 10
classes de equivalência consideradas interessantes é extraído. Dado esse
conjunto, é possível que existam classes de equivalência que contém outras
classes de equivalência, e isso não é desejável. Portanto, removemos do conjunto
qualquer classe de equivalência que represente uma sub-árvore de outra classe de
equivalência.

Dadas o conjunto atualizado das classes de equivalência de interesse, as folhas que não são compostas
por tags html (segundo a hipótese 3 apresentada na introdução deste relatório)
são extraídas. Todas as extrações são consideradas parte do mesmo registro, até
que se uma classe de equivalência se repita. O pseudo-código do processo de
extração é apresentado na Figura 5, a seguir:

\begin{figure}[h!]
\begin{algorithmic}[1]
\STATE{Dado o conjunto de classes de equivalencia $c$ interessantes e a página
html $p$ }
\STATE{Remove de $c$ todas as classes de equivalência que estão contidas em
outras classes de equivalência}
\STATE{$primeira\_classe=NULL$}
\FORALL{Nodos $n$ de $p$}
\IF{$n$ pertence a $c$}
\IF{$primeira\_classe=NULL$}
\STATE{$primeira\_classe=n$}
\ENDIF
\IF{$n = primeira\_classe$}
  \STATE{Inicia um registro novo}
\ENDIF
\STATE{Extrai as folhas de $n$ que não sejam tags html}
\ENDIF
\ENDFOR
\end{algorithmic}
\label{codigo2}
\caption{Determinação de classes de equivalência que representam sub-árvores de
interesse.}
\end{figure}


\section{Avaliação Experimental}

O processo de extração proposto e implementado deve ser avaliado quanto à sua efetividade.
A qualidade de um extrator é determinada pela capacidade de coletar o maior número possível de registros úteis, agregando o mínimo possível de informações irrelevantes.

\subsection{Metodologia de avaliação}

A avaliação experimental consiste na aplicação de métricas tradicionais para quantificar o resultado da extração de informações em páginas de dados reais.
Cada página empregada nos experimentos possui um gabarito correspondente, contendo todos os registros relevantes que devem ser extraídos.
A comparação entre o resultado da extração e o gabarito, por meio de métricas apropriadas, fornece uma medida de efetividade do processo de extração.

\subsubsection{Métricas}

Para avaliar a qualidade do extrator, empregou-se as métricas precisão ({\it precision}) e revocação ({\it recall}) \cite{makhoul1999performance}.
A primeira mede a quantidade de respostas corretas em relação ao total de respostas retornadas e a segunda determina a quantidade de respostas corretas obtidas em relação ao total de respostas esperadas (relevantes):
$$ prec = \frac{respostas\ corretas}{respostas\ retornadas}   \qquad  rev = \frac{respostas\ corretas}{total\ de\ respostas} $$

\subsubsection{Aplicação das métricas}

O processo de extração prentende obter, de páginas html, registros relevantes. Cada registro, por sua vez, contém atributos diversos.
É importante que a avaliação do extrator considere a efetividade do processo de obtenção dos registros e dos seus atributos.

Para tanto, empregou-se três métodos de avaliação:
\begin{itemize}
    \item Cálculo da precisão e revocação sobre os registros extraídos. 
Ou seja, avaliação da habilidade do algoritmo de localizar e extrair os registros relevantes.
    \item Cálculo da precisão e revocação sobre os atributos extraídos.
Neste caso, o total de atributos relevantes extraídos que interessa, sendo considerados de maneira independente dos registros.
    \item Cálculo da precisão e revocação média dos registros extraídos. 
Este cálculo considera, respectivamente, a média aritmética da precisão e da revocação da extração dos
valores dos atributos de cada registro. Ou seja, a precisão da extração de um
registro será dada pela média dos valores de precisão da extração de todos os seus
atributos e a revocação por registro será dada de maneira análoga. 
\end{itemize}

\subsection{Experimentos e resultados}

A metodologia descrita foi empregada na avaliação do extrator atuando sobre quatro coleções, contento, cada uma, três páginas reais.
O detalhamento dos experimentos, os resultados e a análise dos dados, para cada coleção, são apresentados em seguida.


\subsubsection{Coleção {\bf ``cdnow''}}

A coleção ``cdnow'' é composta por páginas de um site de venda de álbuns de música. 
Como pode ser visto na figura \ref{colecao1}, a página contém, basicamente, um menu com estilos musicais, um campo
para busca e uma relação de álbuns à venda. Neste caso, os registros de interesse são os álbuns e os atributos de cada
registro são o artista, o título do álbum e os dois valores de preço.

\newpage

\begin{figure}[h!]
\centering
\includegraphics[scale=0.5]{colecao1.png}
\caption{Página exemplo da coleção {\bf ``cdnow''}}
\label{colecao1}
\end{figure}

A tabela \ref{tabcol1a} contém os valores obtidos com o cálculo das métricas considerando apenas os registros extraídos 
(independente dos atributos estarem completos).

\begin{table}[htpb!]
    \begin{center}
        \begin{tabular}{|p{3.0cm}|c|c|c|c|c|}
            \hline
            {\bf Entrada} & {\bf Total} & {\bf Extraídos} & {\bf Corretos} & {\bf Precisão} & {\bf Revocação}\\
            \hline
            cd1 & 30 & 39 & 30 & 0.77 & 1.0\\
            \hline
            cd2 & 30 & 39 & 30 & 0.77 & 1.0\\
            \hline
            cd3 & 30 & 39 & 30 & 0.77 & 1.0\\
            \hline
        \end{tabular}
    \caption{Resultados da avaliação por registro para coleção {\bf ``cdnow''}}
    \label{tabcol1a}
    \end{center}
\end{table}

Os dados da tabela \ref{tabcol1a} sugerem que o algoritmo foi capaz de extrair todos 
os registros relevantes (revocação igual a 1.0). 
Entretanto, como a precisão não foi alta, o extrator também retornou dados irrelevantes.
Observando a página e analisando o conteúdo retornado, constata-se que o menu de estilos musicais também foi coletado.
Isso ocorreu devido ao fato do menu ser bem estruturado e conter muitas entradas, sendo facilmente confundido com uma relação de registros relevantes.

A tabela \ref{tabcol1b} contém o cálculo de precisão e revocação considerando a coleta de atributos.

\begin{table}[htpb!]
    \begin{center}
        \begin{tabular}{|p{3.0cm}|c|c|c|c|c|}
            \hline
            {\bf Entrada} & {\bf Total} & {\bf Extraídos} & {\bf Corretos} & {\bf Precisão} & {\bf Revocação}\\
            \hline
            cd1 & 120 & 129 & 120 & 0.93 & 1.0\\
            \hline
            cd2 & 120 & 129 & 120 & 0.93 & 1.0\\
            \hline
            cd3 & 120 & 129 & 120 & 0.93 & 1.0\\
            \hline
        \end{tabular}
    \caption{Resultados da avaliação por atributo para coleção {\bf ``cdnow''}}
    \label{tabcol1b}
    \end{center}
\end{table}

Neste caso, cada registro contém exatamente 4 atributos. 
Todos os atributos dos registros relevantes foram coletados pelo extrator (o que é representado pelo valor de revocação 1.0).
Os atributos adicionais coletados, responsáveis pela redução da precisão, são os da listagem de estilos musicais (considerou-se um atributo por item).

A tabela \ref{tabcol1c} contém a média dos valores por registro para a coleção.

\begin{table}[htpb!]
    \begin{center}
        \begin{tabular}{|p{3.0cm}|c|c|c|}
            \hline
            {\bf Entrada} & {\bf Precisão} & {\bf Revocação}\\
            \hline
            cd1 & 0.77 & 0.77\\
            \hline
            cd2 & 0.77 & 0.77\\
            \hline
            cd3 & 0.77 & 0.77\\
            \hline
        \end{tabular}
    \caption{Resultados da avaliação considerando a média dos valores por registro para a coleção {\bf ``cdnow''}}
    \label{tabcol1c}
    \end{center}
\end{table}

Os 30 registros do gabarito foram extraídos corretamente (com todos os atributos).
Entretanto, foram obtidos 9 registros adicionais, que não são relevantes para o objetivo da extração.
Para cada um destes registros, a precisão e a revocação assumem valor 0. 
Portanto, os valores de precisão e revocação são calculados pela média aritmética $\frac{ 30 \times 1.0 + 9 \times 0.0 }{ 39 } = 0.77 $.

\subsubsection{Coleção {\bf ``monster''}}

A coleção ``monster'' contém páginas com uma listagem de registros formados pelos atributos: data, localização, cargo e companhia. 
A figura \ref{colecao2} é um exemplar desta coleção:

\begin{figure}[h!]
\centering
\includegraphics[scale=0.57]{colecao2.png}
\caption{Página exemplo da coleção {\bf ``monster''}}
\label{colecao2}
\end{figure}

\newpage 

A tabela \ref{tabcol2a} apresenta o cálculo das métricas considerando apenas os registros.

\begin{table}[htpb!]
    \begin{center}
        \begin{tabular}{|p{3.0cm}|c|c|c|c|c|}
            \hline
            {\bf Entrada} & {\bf Total} & {\bf Extraídos} & {\bf Corretos} & {\bf Precisão} & {\bf Revocação}\\
            \hline
            monster1 & 50 & 50 & 50 & 1.0 & 1.0\\
            \hline
            monster2 & 50 & 44 & 44 & 1.0 & 0.88\\
            \hline
            monters4 & 50 & 50 & 50 & 1.0 & 1.0\\
            \hline
        \end{tabular}
    \caption{Resultados da avaliação por registro para coleção {\bf ``monster''}}
    \label{tabcol2a}
    \end{center}
\end{table}
Neste caso, não foi coletado nenhum registro adicional. Portanto, a precisão foi 1.0.
Entretanto, para a segunda página da coleção, alguns registros foram perdidos, ocasionando uma redução na revocação.
A justificativa para isso é o fato de algumas entradas conterem um número menor de atributos, o que modifica a estrutura padrão dos registros.

A tabela \ref{tabcol2b} contém os valores de precisão e revocação considerando atributos.

\begin{table}[htpb!]
    \begin{center}
        \begin{tabular}{|p{3.0cm}|c|c|c|c|c|}
            \hline
            {\bf Entrada} & {\bf Total} & {\bf Extraídos} & {\bf Corretos} & {\bf Precisão} & {\bf Revocação}\\
            \hline
            monster1 & 300 & 300 & 300 & 1.0 & 1.0\\
            \hline
            monster2 & 298 & 274 & 274 & 1.0 & 0.92\\
            \hline
            monster4 & 299 & 299 & 299 & 1.0 & 1.0\\
            \hline
        \end{tabular}
    \caption{Resultados da avaliação por atributo para coleção {\bf ``monster''}}
    \label{tabcol2b}
    \end{center}
\end{table}
Todos os atributos coletados são relevantes.
Mas, como já foi observado, alguns registros (e seus atributos) não foram coletados.
Entretanto, a porcentagem de registros relevantes coletados foi alta.

\begin{table}[htpb!]
    \begin{center}
        \begin{tabular}{|p{3.0cm}|c|c|c|}
            \hline
            {\bf Entrada} & {\bf Precisão} & {\bf Revocação}\\
            \hline
            monster1 & 1.0 & 1.0\\
            \hline
            monster2 & 1.0 & 0.88\\
            \hline
            monster4 & 1.0 & 1.0\\
            \hline
        \end{tabular}
    \caption{Resultados da avaliação considerando a média dos valores por registro para a coleção {\bf ``monster''}}
    \label{tabcol2c}
    \end{center}
\end{table}
A tabela \ref{tabcol2c} contém o valores das médias das métricas por registro.
A ausência de dados irrelevantes na coleta e a falha ao coletar todos os registros ficam evidentes neste cálculo.

\subsubsection{Coleção {\bf ``music\_allmusic.com''}}

A coleção ``music\_allmusic.com'' contém páginas com informações de artistas e álbuns.
Cada detalhe de um álbum é um registro que contém como atributos informações como o ano de lançamento e o artista.
A figura \ref{colecao3} é um exemplo de página da coleção ``music\_allmusic.com'':

\newpage

\begin{figure}[h!]
\centering
\includegraphics[scale=0.36]{colecao3.png}
\caption{Página exemplo da coleção {\bf ``music\_allmusic.com''}}
\label{colecao3}
\end{figure}

A tabela \ref{tabcol3a} apresenta os valores para as métricas considerando registros, 
enquanto em \ref{tabcol3b} estão os dados tratando atributos.

\begin{table}[htpb!]
    \begin{center}
        \begin{tabular}{|p{3.0cm}|c|c|c|c|c|}
            \hline
            {\bf Entrada} & {\bf Total} & {\bf Extraídos} & {\bf Corretos} & {\bf Precisão} & {\bf Revocação}\\
            \hline
            001 & 50 & 44 & 44 & 1.0 & 0.88\\
            \hline
            005 & 25 & 23 & 23 & 1.0 & 0.92\\
            \hline
            006 & 50 & 46 & 46 & 1.0 & 0.92\\
            \hline
        \end{tabular}
    \caption{Resultados da avaliação por registro para coleção {\bf ``music\_allmusic.com''}}
    \label{tabcol3a}
    \end{center}
\end{table}

O valor 1.0 de precisão evidencia que não foi coletado nenhum registro adicional (não relevante).
Entretanto, alguns registros foram perdidos. A análise da página mostrou que alguns registros possuem uma estrutura irregular,
prejudicando a qualidade da coleta. Apesar disso, os valores de precisão e revocação foram altos.

\begin{table}[htpb!]
    \begin{center}
        \begin{tabular}{|p{3.0cm}|c|c|c|c|c|}
            \hline
            {\bf Entrada} & {\bf Total} & {\bf Extraídos} & {\bf Corretos} & {\bf Precisão} & {\bf Revocação}\\
            \hline
            001 & 200 & 176 & 176 & 1.0 & 0.88\\
            \hline
            005 & 100 & 92 & 92 & 1.0 & 0.92\\
            \hline
            006 & 200 & 184 & 184 & 1.0 & 0.92\\
            \hline
        \end{tabular}
    \caption{Resultados da avaliação por atributo para coleção {\bf ``music\_allmusic.com''}}
    \label{tabcol3b}
    \end{center}
\end{table}

O gabarito para esta coleção contém somente 3 atributos por registro.
Entretanto, a primeira coluna de descrição de cada registro ({\it Tier}),
também compõe o registro e deve ser considerada no cálculo.

\begin{table}[htpb!]
    \begin{center}
        \begin{tabular}{|p{3.0cm}|c|c|c|}
            \hline
            {\bf Entrada} & {\bf Precisão} & {\bf Revocação}\\
            \hline
            001 & 1.0 & 0.88\\
            \hline
            005 & 1.0 & 0.92\\
            \hline
            006 & 1.0 & 0.88\\
            \hline
        \end{tabular}
    \caption{Resultados da avaliação considerando a média dos valores por registro para a coleção {\bf ``music\_allmusic.com''}}
    \label{tabcol3c}
    \end{center}
\end{table}

A tabela \ref{tabcol3c} contém os valores calculados da média de precisão e revocação por registro.
Como nenhum registro irrelevante foi coletado e todos os registros de interesse foram extraídos, a precisão obtida é 1.0.
Os valores de revocação foram elevados, já que, poucos atributos foram negligenciados pelo extrator.

\subsubsection{Coleção {\bf ``wines''}}

A coleção ``wines'' contém páginas como a da figura \ref{colecao4}.
Cada registro é formado pelos atributos que descrevem uma variedade de vinho (título, descrição, preço, etc).

\begin{figure}[h!]
\centering
\includegraphics[scale=0.45]{colecao4.png}
\caption{Página exemplo da coleção {\bf ``wines''}}
\label{colecao4}
\end{figure}

A tabela \ref{tabcol4a} apresenta os valores para as métricas considerando registros.
Assim como ocorreu para a primeira coleção analisada, a precisão foi reduzida, enquanto a revocação foi elevada.
O motivo foi o mesmo da falha da outra coleção: o menu lateral também foi extraído pelo algoritmo.
Neste caso, o número de itens neste menu é superior ao número de registros na página, o que aumenta a probabilidade
de sua extração. Por isso, a precisão obtida foi muito prejudicada (a página contém apenas 10 registros e 16 itens no menu lateral).

\begin{table}[htpb!]
    \begin{center}
        \begin{tabular}{|p{3.0cm}|c|c|c|c|c|}
            \hline
            {\bf Entrada} & {\bf Total} & {\bf Extraídos} & {\bf Corretos} & {\bf Precisão} & {\bf Revocação}\\
            \hline
            winesByProducer01 & 10 & 26 & 10 & 0.38 & 1.0\\
            \hline
            winesByProducer02 & 10 & 26 & 10 & 0.38 & 1.0\\
            \hline
            winesByProducer03 & 10 & 26 & 10 & 0.38 & 1.0\\
            \hline
        \end{tabular}
    \caption{Resultados da avaliação por registro para coleção {\bf ``wines''}}
    \label{tabcol4a}
    \end{center}
\end{table}

Os dados da tabela \ref{tabcol4b} são referentes aos atributos e 
a tabela \ref{tabcol4c} contém o cálculo das métricas para a média por registro.

\begin{table}[htpb!]
    \begin{center}
        \begin{tabular}{|p{3.0cm}|c|c|c|c|c|}
            \hline
            {\bf Entrada} & {\bf Total} & {\bf Extraídos} & {\bf Corretos} & {\bf Precisão} & {\bf Revocação}\\
            \hline
            winesByProducer01 & 60 & 71 & 55 & 0.92 & 0.91\\
            \hline
            winesByProducer02 & 60 & 66 & 50 & 0.75 & 0.83\\
            \hline
            winesByProducer03 & 60 & 71 & 55 & 0.92 & 0.91\\
            \hline
        \end{tabular}
    \caption{Resultados da avaliação por atributo para coleção {\bf ``wines''}}
    \label{tabcol4b}
    \end{center}
\end{table}

\begin{table}[htpb!]
    \begin{center}
        \begin{tabular}{|p{3.0cm}|c|c|c|}
            \hline
            {\bf Entrada} & {\bf Precisão} & {\bf Revocação}\\
            \hline
            winesByProducer01 & 0.38 & 0.35\\
            \hline
            winesByProducer02 & 0.38 & 0.32\\
            \hline
            winesByProducer03 & 0.38 & 0.35\\
            \hline
        \end{tabular}
    \caption{Resultados da avaliação considerando a média dos valores por registro para a coleção {\bf ``wines''}}
    \label{tabcol4c}
    \end{center}
\end{table}

\newpage
O extrator teve seu pior desempenho para esta coleção.
Além do menu conter mais itens que a lista de registros, os dados não estão bem formatados na página.
Um exemplo disso é o fato de somente alguns registros possuirem um título adicional (acima de seu {\it link}).

\section{Conclusão}

O trabalho prático 1 consistiu no desenvolvimento de um método para extração automática de dados presentes em coleções de páginas HTML.
Além da implementação, foi realizada uma análise experimental para validar a efetividade da proposta.
Os dados da tabela \ref{tabfinal} resumem os resultados obtidos:

\begin{table}[htpb!]
    \begin{center}
        \begin{tabular}{|c|c|c|c|c|c|}
            \hline
            Métricas/Coleções & {\bf cdnow} & {\bf monster} & {\bf music\_allmusic.com}  & {\bf wines} & {\bf Média geral} \\
            \hline
            Precisão por registro & 0.77 & 1.0 & 1.0 & 0.38 & 0.79\\
            \hline
            Revocação por registro & 1.0 & 0.96 & 0.91 & 1.0 & 0.97\\
            \hline
            Precisão por atributo & 0.93 & 1.0 & 1.0 & 0.86 & 0.95\\
            \hline
            Revocação por atributo & 1.0 & 0.97 & 0.91 & 0.88 & 0.94\\
            \hline
            Precisão pela média por registro & 0.77 & 1.0 & 1.0 & 0.38 & 0.79\\
            \hline
            Revocação pela média por registro & 0.77 & 0.96 & 0.89 & 0.34 & 0.74\\
            \hline
        \end{tabular}
    \caption{Média dos resultados por coleção e média geral de todos os resultados}
    \label{tabfinal}
    \end{center}
\end{table}

A tabela \ref{tabfinal} contém a média dos valores obtidos para cada coleção, considerando cada métrica empregada.
Também é apresentado um valor de média geral, que sumariza os resultados de todas as coleções. 
Os valores elevados de precisão e revocação, exceto para ocasiões específicas e justificáveis, sugerem que o método implementado 
é genérico e efetivo.


\bibliographystyle{plain}
\bibliography{doc}

\end{document}
